{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Hani/ForesterSwap/pages/profile/%5Bid%5D.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/router';\r\nimport { motion } from 'framer-motion';\r\nimport { FiUser, FiMail, FiPackage, FiCalendar, FiUsers, FiMapPin } from 'react-icons/fi';\r\nimport { HiArrowLeft } from 'react-icons/hi';\r\nimport { MdFlight, MdVerified, MdShoppingCart, MdLocationCity, MdSchool, MdArrowRightAlt } from 'react-icons/md';\r\nimport { db, auth } from '@/lib/firebase';\r\nimport { doc, getDoc, collection, query, where, getDocs, orderBy, limit } from 'firebase/firestore';\r\nimport { onAuthStateChanged } from 'firebase/auth';\r\n\r\n// Utility function to capitalize names\r\nconst capitalizeName = (name) => {\r\n  if (!name) return '';\r\n  return name.split(' ').map(word =>\r\n    word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()\r\n  ).join(' ');\r\n};\r\n\r\n// Destination theme detection for rides\r\nconst shoppingLocations = ['target', 'walmart', 'costco', 'whole foods', 'trader joe', 'jewel', 'mariano', 'mall', 'outlet'];\r\nconst downtownKeywords = ['downtown', 'city center', 'downtown chicago', 'magnificent mile', 'loop', 'chicago'];\r\nconst collegeKeywords = ['lake forest', 'college', 'university', 'campus', 'northwestern', 'depaul', 'loyola', 'uic', 'uchicago'];\r\n\r\nconst destinationThemes = {\r\n  'airport': { icon: MdFlight, gradient: 'from-blue-500/20 via-cyan-500/10 to-transparent', iconColor: 'text-cyan-400' },\r\n  'shopping': { icon: MdShoppingCart, gradient: 'from-red-500/20 via-pink-500/10 to-transparent', iconColor: 'text-pink-400' },\r\n  'downtown': { icon: MdLocationCity, gradient: 'from-purple-500/20 via-indigo-500/10 to-transparent', iconColor: 'text-indigo-400' },\r\n  'college': { icon: MdSchool, gradient: 'from-green-500/20 via-emerald-500/10 to-transparent', iconColor: 'text-emerald-400' },\r\n  'default': { icon: FiMapPin, gradient: 'from-gray-500/20 via-gray-500/10 to-transparent', iconColor: 'text-gray-400' }\r\n};\r\n\r\nconst getDestinationTheme = (destination) => {\r\n  const lowerDest = destination?.toLowerCase() || '';\r\n  if (lowerDest.includes('airport') || lowerDest.includes('ord') || lowerDest.includes('mdw')) return destinationThemes['airport'];\r\n  if (shoppingLocations.some(shop => lowerDest.includes(shop))) return destinationThemes['shopping'];\r\n  if (downtownKeywords.some(keyword => lowerDest.includes(keyword))) return destinationThemes['downtown'];\r\n  if (collegeKeywords.some(keyword => lowerDest.includes(keyword))) return destinationThemes['college'];\r\n  return destinationThemes['default'];\r\n};\r\n\r\n// Format date from Timestamp or string\r\nconst formatRideDate = (date) => {\r\n  if (!date) return 'No date';\r\n  let dateObj;\r\n  if (date?.toDate) {\r\n    dateObj = date.toDate();\r\n  } else if (typeof date === 'string') {\r\n    dateObj = new Date(date + 'T12:00:00');\r\n  } else {\r\n    return 'Invalid date';\r\n  }\r\n  return dateObj.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });\r\n};\r\n\r\nexport default function PublicProfile() {\r\n  const router = useRouter();\r\n  const { id } = router.query;\r\n  \r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [profileUser, setProfileUser] = useState(null);\r\n  const [listings, setListings] = useState([]);\r\n  const [rides, setRides] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isMobile, setIsMobile] = useState(false);\r\n\r\n  // Detect mobile\r\n  useEffect(() => {\r\n    const checkMobile = () => setIsMobile(window.innerWidth < 768);\r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, []);\r\n\r\n  // Auth check\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\r\n      if (!user) {\r\n        router.push('/login');\r\n      } else {\r\n        setCurrentUser(user);\r\n      }\r\n    });\r\n    return () => unsubscribe();\r\n  }, [router]);\r\n\r\n  // Fetch profile user data\r\n  useEffect(() => {\r\n    if (!id || !currentUser) return;\r\n\r\n    // If viewing own profile, redirect to main profile page\r\n    if (id === currentUser.uid) {\r\n      router.push('/profile');\r\n      return;\r\n    }\r\n\r\n    const fetchProfileData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        // Fetch user document\r\n        const userDoc = await getDoc(doc(db, 'users', id));\r\n        if (userDoc.exists()) {\r\n          setProfileUser({ id: userDoc.id, ...userDoc.data() });\r\n        } else {\r\n          // User not found\r\n          setProfileUser(null);\r\n        }\r\n\r\n        // Fetch user's listings (filter sold client-side to avoid index requirement)\r\n        const listingsQuery = query(\r\n          collection(db, 'products'),\r\n          where('userId', '==', id),\r\n          orderBy('createdAt', 'desc'),\r\n          limit(12)\r\n        );\r\n        const listingsSnap = await getDocs(listingsQuery);\r\n        // Filter out sold items client-side\r\n        setListings(listingsSnap.docs\r\n          .map(doc => ({ id: doc.id, ...doc.data() }))\r\n          .filter(listing => !listing.sold)\r\n          .slice(0, 6)\r\n        );\r\n\r\n        // Fetch user's rides (where they are organizer)\r\n        console.log('Fetching rides for organizerId:', id);\r\n        const ridesQuery = query(\r\n          collection(db, 'rides'),\r\n          where('organizerId', '==', id),\r\n          limit(20)\r\n        );\r\n        const ridesSnap = await getDocs(ridesQuery);\r\n        console.log('Rides found:', ridesSnap.docs.length);\r\n        \r\n        // Filter expired rides and sort client-side\r\n        const today = new Date();\r\n        today.setHours(0, 0, 0, 0); // Start of today\r\n        \r\n        const filteredRides = ridesSnap.docs\r\n          .map(doc => ({ id: doc.id, ...doc.data() }))\r\n          .filter(ride => {\r\n            // Handle both Timestamp objects and string dates\r\n            let rideDate;\r\n            if (ride.date?.toDate) {\r\n              // Firestore Timestamp\r\n              rideDate = ride.date.toDate();\r\n            } else if (typeof ride.date === 'string') {\r\n              // String date like \"2025-12-19\"\r\n              rideDate = new Date(ride.date);\r\n            } else {\r\n              return false;\r\n            }\r\n            return rideDate >= today;\r\n          })\r\n          .sort((a, b) => {\r\n            const dateA = a.date?.toDate ? a.date.toDate() : new Date(a.date);\r\n            const dateB = b.date?.toDate ? b.date.toDate() : new Date(b.date);\r\n            return dateA - dateB;\r\n          })\r\n          .slice(0, 6);\r\n        console.log('Filtered rides:', filteredRides);\r\n        setRides(filteredRides);\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching profile:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProfileData();\r\n  }, [id, currentUser, router]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-16 h-16 mx-auto mb-4 border-4 border-primary/30 border-t-primary rounded-full animate-spin\"></div>\r\n          <div className=\"text-gray-400 text-lg\">Loading profile...</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!profileUser) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <FiUser size={64} className=\"mx-auto text-gray-600 mb-4\" />\r\n          <h2 className=\"text-2xl font-bold text-white mb-2\">User Not Found</h2>\r\n          <p className=\"text-gray-400 mb-6\">This profile doesn't exist or has been removed.</p>\r\n          <button\r\n            onClick={() => router.back()}\r\n            className=\"px-6 py-3 bg-primary/20 text-primary rounded-full font-semibold hover:bg-primary/30 transition-all\"\r\n          >\r\n            Go Back\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const displayName = capitalizeName(\r\n    profileUser.name || \r\n    profileUser.firstName && profileUser.lastName \r\n      ? `${profileUser.firstName} ${profileUser.lastName}` \r\n      : profileUser.email?.split('@')[0] || 'User'\r\n  );\r\n\r\n  const memberSince = profileUser.createdAt?.toDate \r\n    ? profileUser.createdAt.toDate().toLocaleDateString('en-US', { month: 'long', year: 'numeric' })\r\n    : 'Recently joined';\r\n\r\n  return (\r\n    <div className=\"w-full min-h-screen bg-transparent pb-32 flex flex-col items-center\">\r\n      {/* Header with Back Button */}\r\n      <div className=\"w-full backdrop-blur-2xl\" style={{ marginTop: \"2vh\", marginBottom: \"2vh\" }}>\r\n        <div className=\"max-w-2xl mx-auto px-6 py-4 flex items-center gap-4\">\r\n          {/* Back Button */}\r\n          <motion.button\r\n            whileHover={{ scale: 1.05, x: -2 }}\r\n            whileTap={{ scale: 0.95 }}\r\n            onClick={() => router.back()}\r\n            className=\"p-2 rounded-full transition-all hover:bg-white/5 text-white\"\r\n          >\r\n            <HiArrowLeft size={28} />\r\n          </motion.button>\r\n          \r\n          {/* Page Title */}\r\n          <motion.h1\r\n            initial={{ opacity: 0, y: -20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            className=\"text-2xl md:text-3xl font-bold text-white\"\r\n          >\r\n            Back\r\n          </motion.h1>\r\n        </div>\r\n      </div>\r\n\r\n      <div \r\n        className=\"w-full max-w-2xl mx-auto py-8\"\r\n        style={isMobile ? { paddingLeft: '4vw', paddingRight: '4vw' } : { paddingLeft: '1rem', paddingRight: '1rem' }}\r\n      >\r\n        {/* Profile Header */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className=\"text-center mb-10\"\r\n        >\r\n          {/* Avatar */}\r\n          <div className=\"w-28 h-28 mx-auto mb-6 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center shadow-2xl shadow-primary/30 border-4 border-white/10 overflow-hidden\">\r\n            {profileUser.photoURL ? (\r\n              <img src={profileUser.photoURL} alt=\"\" className=\"w-full h-full object-cover\" />\r\n            ) : (\r\n              <FiUser size={56} className=\"text-white\" />\r\n            )}\r\n          </div>\r\n\r\n          {/* Name with Verified Badge */}\r\n          <div className=\"flex items-center justify-center gap-2 mb-2\">\r\n            <h2 className=\"text-3xl font-bold text-white\">{displayName}</h2>\r\n            {profileUser.emailVerified && (\r\n              <MdVerified className=\"text-primary\" size={28} />\r\n            )}\r\n          </div>\r\n\r\n          {/* Member Since */}\r\n          <div className=\"flex items-center justify-center gap-2 text-gray-400 mb-4\">\r\n            <FiCalendar size={16} />\r\n            <span className=\"text-sm\">Member since {memberSince}</span>\r\n          </div>\r\n\r\n          {/* Verified Badge */}\r\n          {profileUser.emailVerified && (\r\n            <span className=\"inline-block px-4 py-1.5 bg-green-500/20 text-green-400 text-sm rounded-full border border-green-500/30\">\r\n              ✓ Verified Student\r\n            </span>\r\n          )}\r\n        </motion.div>\r\n\r\n        {/* Listings Section */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.1 }}\r\n          className=\"mb-10\"\r\n        >\r\n          <div className=\"flex items-center gap-3 mb-4\">\r\n            <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center\">\r\n              <FiPackage size={20} className=\"text-primary\" />\r\n            </div>\r\n            <h3 className=\"text-xl font-bold text-white\">Listings</h3>\r\n          </div>\r\n\r\n          {listings.length === 0 ? (\r\n            <div className=\"bg-white/5 rounded-2xl border border-white/10 p-8 text-center\" style={{ minHeight: '10vh', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n              {/* <FiPackage size={32} className=\"mx-auto text-gray-600 mb-3\" /> */}\r\n              <p className=\"text-gray-400\">No active listings</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\r\n              {listings.map((listing) => (\r\n                <motion.div\r\n                  key={listing.id}\r\n                  whileHover={{ scale: 1.02 }}\r\n                  whileTap={{ scale: 0.98 }}\r\n                  onClick={() => router.push(`/listing/${listing.id}`)}\r\n                  className=\"cursor-pointer\"\r\n                >\r\n                  <div className=\"aspect-square rounded-2xl overflow-hidden bg-white/5 mb-2\">\r\n                    {listing.photo ? (\r\n                      <img src={listing.photo} alt={listing.name} className=\"w-full h-full object-cover\" />\r\n                    ) : (\r\n                      <div className=\"w-full h-full flex items-center justify-center\">\r\n                        <FiPackage size={32} className=\"text-gray-600\" />\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-sm font-semibold text-white truncate\">{listing.name}</p>\r\n                  <p className=\"text-sm text-primary font-bold\">\r\n                    {listing.priceType === 'free' || listing.price === 0 ? 'FREE' : `$${listing.price}`}\r\n                  </p>\r\n                </motion.div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </motion.div>\r\n\r\n        {/* Rides Section */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.2 }}\r\n          style={{marginTop:\"3vh\"}}\r\n        >\r\n          <div className=\"flex items-center gap-3 mb-4\">\r\n            <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-500/20 flex items-center justify-center\">\r\n              <MdFlight size={20} className=\"text-cyan-400\" />\r\n            </div>\r\n            <h3 className=\"text-xl font-bold text-white\">Rides</h3>\r\n          </div>\r\n\r\n          {rides.length === 0 ? (\r\n            <div className=\"bg-white/5 rounded-2xl border border-white/10 p-8 text-center\" style={{ minHeight: '10vh', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n              {/* <MdFlight size={32} className=\"mx-auto text-gray-600 mb-3\" /> */}\r\n              <p className=\"text-gray-400\">No upcoming rides</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              {rides.map((ride, index) => {\r\n                const theme = getDestinationTheme(ride.destination);\r\n                const DestIcon = theme.icon;\r\n                \r\n                return (\r\n                  <motion.div\r\n                    key={ride.id}\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ delay: index * 0.05 }}\r\n                    whileHover={{ y: -2, scale: 1.01 }}\r\n                    whileTap={{ scale: 0.99 }}\r\n                    onClick={() => router.push(`/ride/${ride.id}`)}\r\n                    className=\"group relative cursor-pointer\"\r\n                  >\r\n                    {/* Glow Effect */}\r\n                    <div className={`absolute inset-0 bg-gradient-to-br ${theme.gradient} rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500`} />\r\n                    \r\n                    {/* Card */}\r\n                    <div className=\"relative bg-white/5 backdrop-blur-xl rounded-2xl border border-white/10 overflow-hidden group-hover:border-white/20 transition-all duration-300\">\r\n                      {/* Gradient Background */}\r\n                      <div className={`absolute inset-0 bg-gradient-to-br ${theme.gradient} opacity-50`} />\r\n                      \r\n                      {/* Content */}\r\n                      <div className=\"relative p-4 flex items-center gap-4\">\r\n                        {/* Icon */}\r\n                        <div className=\"w-12 h-12 rounded-xl bg-white/5 flex items-center justify-center flex-shrink-0\">\r\n                          <DestIcon className={theme.iconColor} size={28} />\r\n                        </div>\r\n                        \r\n                        {/* Info */}\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <h4 className=\"font-bold text-white text-lg truncate\">{ride.destination}</h4>\r\n                          <div className=\"flex items-center gap-2 text-sm text-gray-400\">\r\n                            <span>{formatRideDate(ride.date)}</span>\r\n                            <span className=\"text-gray-600\">•</span>\r\n                            <span>{ride.time}</span>\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        {/* Right side */}\r\n                        <div className=\"flex items-center gap-3\">\r\n                          <div className=\"text-right\">\r\n                            <div className=\"flex items-center gap-1 text-sm text-gray-400\">\r\n                              <FiUsers size={14} />\r\n                              <span>{ride.members || 1}/{ride.seats}</span>\r\n                            </div>\r\n                          </div>\r\n                          <MdArrowRightAlt className=\"text-primary\" size={24} />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </motion.div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </motion.div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}